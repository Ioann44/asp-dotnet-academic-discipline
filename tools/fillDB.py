import requests
import os
from base64 import b64encode

api_url = "https://localhost:3000/api/dishes"

dishes_data = [
    {
        "Name": "Борщ",
        "Description": "Традиционный украинский суп, приготовленный из свежих овощей, мяса и специального бульона. Борщ обладает насыщенным вкусом и ароматом, что делает его любимым блюдом во многих странах.",
        "Ingredients": "Капуста, мясо, свекла, картошка, лук, морковь, помидоры, зелень, специи",
        "Rating": 4.5,
        "RatingCount": 20,
        "Price": 250,
        "Type": "first",
        "meatAvailability": "meat",
    },
    {
        "Name": "Пельмени с мясом",
        "Description": "Пельмени – это традиционное блюдо, состоящее из тонкого теста, начиненного сочным мясом. Пельмени обладают неповторимым вкусом и могут подаваться как самостоятельное блюдо или в супе.",
        "Ingredients": "Мясо, тесто, лук, специи",
        "Rating": 4.0,
        "RatingCount": 15,
        "Price": 180,
        "Type": "second",
        "meatAvailability": "meat",
    },
    {
        "Name": "Цезарь-салат",
        "Description": "Цезарь-салат – это изысканное блюдо, состоящее из свежего салата, обжаренной куриной грудки, сыра пармезан и ароматного соуса. Цезарь-салат пользуется популярностью благодаря своему богатому вкусу и аппетитному виду.",
        "Ingredients": "Курица, салат, пармезан, хлебные крошки, соус Цезарь",
        "Rating": 4.7,
        "RatingCount": 25,
        "Price": 320,
        "Type": "other",
        "meatAvailability": "meat",
    },
    {
        "Name": "Пицца 'Маргарита'",
        "Description": "Пицца 'Маргарита' – классическое итальянское блюдо, приготовленное из тонкого теста, свежих помидоров, ароматного сыра и оливкового масла. Это блюдо покоряет своим простым, но неповторимым вкусом.",
        "Ingredients": "Тесто, помидоры, сыр, оливковое масло, базилик",
        "Rating": 4.8,
        "RatingCount": 30,
        "Price": 400,
        "Type": "second",
        "meatAvailability": "vegetarian",
    },
    {
        "Name": "Суши ролл 'Филадельфия'",
        "Description": "Суши ролл 'Филадельфия' – изысканное блюдо японской кухни, приготовленное из свежей рыбы, нежного риса и огурца. Роллы 'Филадельфия' отличаются нежным вкусом и стильным оформлением.",
        "Ingredients": "Рыба, рис, огурец, сливочный сыр, нори, соевый соус",
        "Rating": 4.9,
        "RatingCount": 40,
        "Price": 550,
        "Type": "second",
        "meatAvailability": "meat",
    },
    {
        "Name": "Стейк из говядины",
        "Description": "Стейк из говядины – это изысканное мясное блюдо, приготовленное из отборной говядины и приправленное специями. Стейк подается сочным и ароматным, прекрасно сочетаясь с разнообразными гарнирами.",
        "Ingredients": "Говядина, приправы, масло",
        "Rating": 4.6,
        "RatingCount": 18,
        "Price": 700,
        "Type": "second",
        "meatAvailability": "meat",
    },
    {
        "Name": "Лобстер с маслом",
        "Description": "Лобстер с маслом – роскошное блюдо, приготовленное из свежего лобстера, подается с нежным маслом и ароматными приправами. Это блюдо является настоящим угощением для ценителей изысканной кухни.",
        "Ingredients": "Лобстер, масло, специи",
        "Rating": 4.2,
        "RatingCount": 12,
        "Price": 1200,
        "Type": "second",
        "meatAvailability": "meat",
    },
    {
        "Name": "Тирамису",
        "Description": "Тирамису – это итальянский десерт, приготовленный из маскарпоне, бисквитных палочек и ароматного кофе. Тирамису обладает нежным вкусом и станет прекрасным завершением вашего ужина.",
        "Ingredients": "Маскарпоне, бисквит, яйца, сахар, кофе",
        "Rating": 4.4,
        "RatingCount": 22,
        "Price": 220,
        "Type": "dessert",
        "meatAvailability": "vegetarian",
    },
    {
        "Name": "Фруктовый коктейль",
        "Description": "Фруктовый коктейль – освежающий напиток, приготовленный из свежих фруктов и натурального сока. Этот коктейль идеально подходит для тех, кто предпочитает легкие и вкусные напитки.",
        "Ingredients": "Фрукты, сок, лед",
        "Rating": 4.3,
        "RatingCount": 17,
        "Price": 150,
        "Type": "drinks",
        "meatAvailability": "vegetarian",
    },
]

# Предполагаем, что изображения находятся в директории с теми же именами, что и блюда
image_dir = "../server/wwwroot/images"

for dish_data in dishes_data:
    # Чтение изображения
    image_path = os.path.join(image_dir, f"{dish_data['Name'].lower()}.jpg")
    with open(image_path, "rb") as image_file:
        image_data = b64encode(image_file.read()).decode("utf-8")

    # Подготовка данных для запроса
    dish_data["Image1"] = image_data
    # dish_data["Image2"] = image_data
    # dish_data["Image3"] = image_data

    # Отправка POST-запроса для создания блюда
    response = requests.post(api_url, json=dish_data, verify=False)

    if response.status_code == 201:
        print(f"Блюдо '{dish_data['Name']}' успешно добавлено.")
    else:
        print(f"Ошибка при добавлении блюда '{dish_data['Name']}': {response.status_code}, {response.text}")
